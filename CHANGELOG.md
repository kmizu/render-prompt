# Changelog

render-promptの変更履歴です。

このプロジェクトは[セマンティックバージョニング](https://semver.org/lang/ja/)に従います。

## [Unreleased]

## [0.1.0] - 2024-12-17

### 追加

- **コア機能**
  - 変数置換機能（`{{ var }}`）の実装
  - Includeディレクティブ（`{{> file }}`）の実装
  - YAML/JSONデータファイルの読み込み
  - 複数データファイルのDeep merge機能

- **変数置換**
  - ドット記法によるネストしたオブジェクトへのアクセス（`{{ user.name }}`）
  - 配列要素へのインデックスアクセス（`{{ items.0 }}`）
  - エスケープ構文（`\{{ var }}`）
  - 各種データ型のサポート（文字列、数値、真偽値、null、オブジェクト、配列）

- **Include機能**
  - 相対パスによるファイルインクルード
  - 再帰的なインクルード処理
  - 循環インクルードの自動検出
  - インクルード深さ制限（デフォルト: 20）
  - パストラバーサル攻撃の防止

- **CLIオプション**
  - `--template, -t`: テンプレートファイル指定
  - `--data, -d`: データファイル指定（複数指定可能）
  - `--out, -o`: 出力ファイル指定
  - `--root, -r`: インクルードルートディレクトリ指定
  - `--strict`: 未定義変数をエラーとして扱う
  - `--warn-undefined`: 未定義変数を警告表示
  - `--max-include-depth`: インクルード最大深さ設定
  - `--version, -V`: バージョン表示
  - `--help, -h`: ヘルプ表示

- **エラーハンドリング**
  - 明確な終了コード（0, 2-7）
  - 機械可読なエラーメッセージ形式
  - 行番号・列番号付きエラー表示

- **テスト**
  - 51個のユニットテスト
  - データマージのテスト
  - 変数置換のテスト
  - Includeのテスト
  - エンドツーエンドテスト

- **ドキュメント**
  - README.md（日本語）
  - EXAMPLES.md（実用例集）
  - CONTRIBUTING.md（開発ガイド）
  - CHANGELOG.md（このファイル）

### 技術スタック

- Rust 2021 edition
- clap 4.5（CLI）
- serde 1.0（データシリアライゼーション）
- serde_yaml 0.9（YAML対応）
- serde_json 1.0（JSON対応）
- regex 1.10（パターンマッチング）
- thiserror 1.0（エラーハンドリング）
- path-clean 1.0（パス正規化）

### パフォーマンス

- シングルバイナリ（約2.5MB、strip後）
- 正規表現の事前コンパイル（`lazy_static`）
- ゼロコピー最適化

### セキュリティ

- パストラバーサル攻撃の防止
- 循環インクルード検出
- 深さ制限によるDoS対策
- 入力検証

### 制限事項（意図的な設計）

以下の機能は実装されていません：

- 条件分岐（if/else）
- ループ（for/each）
- 関数やフィルター
- 数式評価
- カスタム関数
- ネットワークアクセス
- コード実行

これらの機能は、ツールをシンプルに保つために意図的に除外されています。

---

## リリースノートの形式

### [バージョン] - YYYY-MM-DD

#### 追加 (Added)
新機能

#### 変更 (Changed)
既存機能の変更

#### 非推奨 (Deprecated)
今後削除予定の機能

#### 削除 (Removed)
削除された機能

#### 修正 (Fixed)
バグ修正

#### セキュリティ (Security)
セキュリティ関連の変更
